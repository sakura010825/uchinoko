# うちの子の気持ち

愛猫の写真を投稿すると、AIが猫の気持ちを代弁してくれる「翻訳SNS」です。

## 技術スタック

- **Frontend:** Next.js 14 (App Router), TypeScript
- **UI Framework:** Tailwind CSS, Lucide React, shadcn/ui
- **Backend / DB:** Firebase (Authentication, Firestore, Storage)
- **AI Integration:** Google Gemini API
- **Image Processing:** sharp

## セットアップ

詳細なセットアップ手順は[SETUP.md](./SETUP.md)を参照してください。

### クイックスタート

1. **依存関係のインストール**
   ```bash
   npm install
   ```

2. **環境変数の設定**
   ```bash
   cp .env.example .env.local
   # .env.localを編集して実際の値を設定
   ```

3. **開発サーバーの起動**
   ```bash
   npm run dev
   ```

詳細は[SETUP.md](./SETUP.md)を参照してください。

## デプロイ（インターネット公開）

アプリをインターネット上で公開する方法：

- **クイックスタート**: [DEPLOY_QUICK_START.md](./DEPLOY_QUICK_START.md) - 最短5分でデプロイ
- **詳細手順**: [DEPLOY.md](./DEPLOY.md) - 詳細なデプロイ手順とトラブルシューティング

### 推奨: Vercelを使用

1. [Vercel](https://vercel.com) にGitHubアカウントでログイン
2. GitHubリポジトリをインポート
3. 環境変数を設定
4. デプロイ完了！

詳細は [DEPLOY_QUICK_START.md](./DEPLOY_QUICK_START.md) を参照してください。

## プロジェクト構造

```
uchinoko/
├── app/
│   ├── api/
│   │   └── generate/        # AI生成API (Gemini API)
│   ├── auth/
│   │   ├── login/           # ログインページ
│   │   └── signup/          # 新規登録ページ
│   ├── post/
│   │   └── create/          # 投稿作成ページ
│   ├── posts/               # 投稿一覧ページ
│   ├── techo/
│   │   └── create/          # うちの子手帳作成ページ
│   ├── globals.css          # グローバルスタイル
│   ├── layout.tsx           # ルートレイアウト
│   └── page.tsx             # トップページ（LP）
├── components/
│   ├── ui/                  # shadcn/uiコンポーネント
│   │   ├── button.tsx
│   │   ├── card.tsx
│   │   ├── dialog.tsx
│   │   ├── input.tsx
│   │   └── label.tsx
│   ├── nikukyu-button.tsx   # 肉球ボタン
│   └── paw-print-animation.tsx # 肉球スタンプアニメーション
├── lib/
│   ├── firebase/
│   │   ├── config.ts        # Firebase初期化
│   │   ├── auth.ts          # 認証関数
│   │   ├── firestore.ts     # Firestore操作
│   │   ├── storage.ts       # Storage操作
│   │   └── types.ts         # 型定義
│   └── utils.ts             # ユーティリティ関数
└── public/                  # 静的ファイル
```

## セキュリティ設定

### Firebase Storage セキュリティルール

- 認証必須: ログインしているユーザーのみが書き込み可能
- パス制限: `/posts/{userId}/{fileName}` 形式で、ユーザーは自分のフォルダにのみ書き込み可能
- ファイル制限: 画像ファイル（`image/*`）のみ、5MB以下

詳細は `storage.rules` を参照してください。

## 実装済み機能

### ✅ 認証機能
- メールアドレス・パスワードでの新規登録
- ログイン・ログアウト
- 認証状態の管理

### ✅ うちの子手帳
- 猫の名前、性格、口調、好きなものの登録
- 複数のうちの子手帳の管理
- 投稿時にうちの子手帳を選択

### ✅ 投稿機能
- 画像アップロード（Firebase Storage）
- HEICファイルの自動変換（JPEG形式に変換）
- AIによる気持ちの翻訳（Gemini API）
- 肉球ボタンによる翻訳生成
- 肉球スタンプアニメーション（ローディング時）

### ✅ 投稿一覧
- 全ユーザーの投稿を時系列で表示
- 画像と翻訳結果の表示
- カリカリ（いいね）機能

### ✅ カリカリ機能
- 投稿へのいいね
- いいね数の表示
- いいね状態の管理

### ✅ LINEスタンプチャレンジ
- 投稿8つでスタンプセット作成
- 進捗バーでモチベーション向上
- 背景透過PNG形式のスタンプセットをZIPでダウンロード
- スタンプチャレンジ専用ページ

### ✅ シェア機能（おみくじ機能付き）
- SNSシェア用画像生成
- ランダムなラッキーアイテム（おみくじ）を表示
- Twitter、Facebookでのシェア対応
- シェア画像のダウンロード機能

### ✅ うちの子手帳管理
- うちの子手帳一覧ページ
- うちの子手帳の編集機能
- 複数のうちの子手帳の管理

### ✅ ユーザープロフィール
- プロフィールページ
- マイ投稿一覧
- 投稿の削除機能
- 投稿数・統計情報の表示

### ✅ 投稿管理
- 投稿の編集機能
- 投稿の削除機能
- 投稿詳細の表示

### ✅ UI/UX改善
- 共通ヘッダーコンポーネント
- 認証状態に応じたナビゲーション
- レスポンシブデザイン
- 共通ローディングコンポーネント
- エラーメッセージコンポーネント
- 404エラーページ

### ✅ 投稿詳細ページ
- 個別投稿の詳細表示
- 投稿へのカリカリ（いいね）
- シェア機能
- 投稿の編集・削除（所有者のみ）

### ✅ 検索・フィルター機能
- 投稿検索機能（猫の名前・翻訳内容で検索）
- リアルタイム検索
- 検索結果の表示

### ✅ 無限スクロール
- Intersection Observer APIを使用した無限スクロール
- パフォーマンス最適化（10件ずつ読み込み）
- 検索時は無限スクロールを無効化

### ✅ パフォーマンス最適化
- Next.js Image最適化（AVIF、WebP対応）
- 無限スクロールによる効率的なデータ読み込み
- 画像の遅延読み込み

### ✅ SEO対応
- メタタグの最適化
- Open Graph対応
- Twitter Card対応

### ✅ ユーザー体験の改善
- トースト通知システム
- スケルトンローディング
- アクセシビリティの改善（aria-label、キーボードナビゲーション）
- 画像の遅延読み込み最適化
- オフライン検出機能
- フォームバリデーションの改善（リアルタイムバリデーション）

### ✅ パフォーマンス監視・分析
- Web Vitals監視（CLS、FID、FCP、LCP、TTFB）
- パフォーマンスメトリクスの記録
- API呼び出し時間の測定
- エラーロギング
- イベントトラッキング

## コード品質

### 型安全性
- TypeScriptによる厳密な型チェック
- 型定義の整理と再利用性の向上
- カスタムエラークラスの実装

### エラーハンドリング
- 統一されたエラーハンドリング
- ユーザーフレンドリーなエラーメッセージ
- エラーロギングとトラッキング

### 定数管理
- アプリケーション全体で使用する定数を`lib/constants.ts`に集約
- 設定値の一元管理

## 今後の実装予定

- **通知機能**（カリカリをもらった時の通知など）
- **Algoliaなどの検索サービス統合**（より高度な検索機能）
- **PWA対応**（オフライン機能）
- **ユニットテスト・E2Eテスト**の追加
- **国際化対応**（i18n）

## ライセンス

MIT

